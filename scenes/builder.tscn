[gd_scene load_steps=18 format=3 uid="uid://duf6fdpme1wuv"]

[ext_resource type="Script" path="res://scripts/builder.gd" id="1_d0omy"]
[ext_resource type="PackedScene" uid="uid://cr87fdyx5cywf" path="res://scenes/hitbox.tscn" id="2_dnb7x"]
[ext_resource type="PackedScene" uid="uid://d22ttfbgqyq0f" path="res://scenes/hp_bar.tscn" id="4_gh1bu"]
[ext_resource type="Script" path="res://scripts/state_machine.gd" id="4_st21i"]
[ext_resource type="Script" path="res://scripts/mob_states/builder_states/builder_idle.gd" id="5_81rsl"]
[ext_resource type="Script" path="res://scripts/mob_states/builder_states/builder_walking.gd" id="6_q2xqq"]
[ext_resource type="Script" path="res://scripts/mob_states/builder_states/builder_dying.gd" id="7_e7sqj"]
[ext_resource type="Script" path="res://scripts/mob_states/builder_states/builder_building.gd" id="8_n5mbf"]
[ext_resource type="PackedScene" uid="uid://c64kdkeybuyfm" path="res://scenes/steering.tscn" id="9_0q24m"]
[ext_resource type="PackedScene" uid="uid://ck5j4uyt7yhnn" path="res://scenes/navigation_agent.tscn" id="12_8yscr"]
[ext_resource type="PackedScene" uid="uid://c6vldeo6sa1k8" path="res://scenes/vision_area.tscn" id="12_jpbvs"]
[ext_resource type="PackedScene" uid="uid://cbjolscy1xdfc" path="res://scenes/audible.tscn" id="13_jx1a3"]
[ext_resource type="PackedScene" uid="uid://che2c6tqo8da5" path="res://scenes/builder3_sprite.tscn" id="14_4nbne"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_cflih"]
radius = 5.0
height = 26.0

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_gpv4s"]
radius = 7.0
height = 52.0

[sub_resource type="CircleShape2D" id="CircleShape2D_yjj65"]
radius = 21.0238

[sub_resource type="CircleShape2D" id="CircleShape2D_44k0m"]
radius = 100.0

[node name="Builder" type="CharacterBody2D"]
script = ExtResource("1_d0omy")

[node name="CollisionShape" type="CollisionShape2D" parent="."]
unique_name_in_owner = true
position = Vector2(2, 0)
rotation = 1.5708
shape = SubResource("CapsuleShape2D_cflih")
debug_color = Color(0, 0.6, 0.701961, 0.0509804)

[node name="Hitbox" parent="." instance=ExtResource("2_dnb7x")]
unique_name_in_owner = true
position = Vector2(0, -9)
collision_layer = 2
collision_mask = 0
monitoring = false

[node name="HitboxShape" type="CollisionShape2D" parent="Hitbox"]
unique_name_in_owner = true
position = Vector2(-1, -14)
shape = SubResource("CapsuleShape2D_gpv4s")

[node name="HpBar" parent="." instance=ExtResource("4_gh1bu")]
unique_name_in_owner = true
offset_left = -12.0
offset_top = -52.0
offset_bottom = -48.0

[node name="BuilderStateMachine" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("4_st21i")

[node name="Idle" type="Node" parent="BuilderStateMachine"]
script = ExtResource("5_81rsl")

[node name="Walking" type="Node" parent="BuilderStateMachine"]
script = ExtResource("6_q2xqq")

[node name="Dying" type="Node" parent="BuilderStateMachine"]
script = ExtResource("7_e7sqj")

[node name="Building" type="Node" parent="BuilderStateMachine"]
script = ExtResource("8_n5mbf")

[node name="WorkingArea" type="Area2D" parent="."]
unique_name_in_owner = true
position = Vector2(1, -20)
collision_layer = 0
collision_mask = 32
monitorable = false

[node name="WorkingRange" type="CollisionShape2D" parent="WorkingArea"]
unique_name_in_owner = true
position = Vector2(0, -2)
shape = SubResource("CircleShape2D_yjj65")
debug_color = Color(0, 0.6, 0.701961, 0.12549)

[node name="VisionArea" parent="." instance=ExtResource("12_jpbvs")]
unique_name_in_owner = true
position = Vector2(0, -27)
monitoring = false

[node name="VisionRange" type="CollisionShape2D" parent="VisionArea"]
unique_name_in_owner = true
shape = SubResource("CircleShape2D_44k0m")
debug_color = Color(0, 0.6, 0.701961, 0.0235294)

[node name="Audible" parent="." instance=ExtResource("13_jx1a3")]
unique_name_in_owner = true

[node name="NavAgent" parent="." instance=ExtResource("12_8yscr")]
unique_name_in_owner = true
path_desired_distance = 10.0
target_desired_distance = 30.0
avoidance_enabled = false
radius = 8.0
max_speed = 200.0

[node name="Steering" parent="." instance=ExtResource("9_0q24m")]
unique_name_in_owner = true

[node name="Sprite" parent="." instance=ExtResource("14_4nbne")]
unique_name_in_owner = true
position = Vector2(1, -27)
scale = Vector2(0.25, 0.25)
